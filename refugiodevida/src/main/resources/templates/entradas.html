<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Refugio de Vida - Entradas Emocionales</title>
    
    <!-- Fuente y CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css" />
</head>
<body>

    <!-- Mensaje motivacional dinÃ¡mico -->
    <div id="mensaje-motivacional" class="motivacional"></div>

    <h1>ğŸŒ¸ Mis Entradas Emocionales ğŸŒ¸</h1>

    <!-- Formulario -->
    <form th:action="@{/entradas/guardar}" th:object="${entradaNueva}" method="post" class="formulario">
        <label>EmociÃ³n:</label>
        <input type="text" th:field="*{emocion}" required />

        <label>DescripciÃ³n:</label>
        <textarea th:field="*{descripcion}" required></textarea>

        <button type="submit">Guardar Entrada</button>
    </form>

    <hr/>

    <!-- Tabla de entradas -->
    <h2>ğŸŒ¼ Listado de Entradas ğŸŒ¼</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Fecha</th>
                <th>EmociÃ³n</th>
                <th>DescripciÃ³n</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="entrada : ${entradas}">
                <td th:text="${entrada.id}">1</td>
                <td th:text="${#temporals.format(entrada.fecha, 'dd-MM-yyyy HH:mm')}">17-06-2025 22:00</td>
                <td th:text="${entrada.emocion}">Felicidad</td>
                <td th:text="${entrada.descripcion}">Hoy fue un gran dÃ­a...</td>
                <td>
                    <a th:href="@{/entradas/eliminar/{id}(id=${entrada.id})}" 
                       onclick="return confirm('Â¿EstÃ¡s seguro que quieres eliminar esta entrada?');">
                       Eliminar
                    </a>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Script para mensaje motivacional -->
    <script>
        const mensajeElement = document.getElementById("mensaje-motivacional");
        const hora = new Date().getHours();
        let mensaje = "";

        if (hora < 6) {
            mensaje = "Es de madrugada, todo lo que hagas ahora es valentÃ­a. ğŸŒŒ";
        } else if (hora < 12) {
            mensaje = "Buenos dÃ­as â˜€ï¸, hoy es un gran dÃ­a para sanar y avanzar.";
        } else if (hora < 18) {
            mensaje = "Â¡Tarde brillante! Sigue construyendo tu paz. ğŸŒ¿";
        } else {
            mensaje = "La noche trae reflexiÃ³n. Cada entrada es un paso mÃ¡s. ğŸŒ™";
        }

        mensajeElement.textContent = mensaje;
    </script>
</body>
</html>
